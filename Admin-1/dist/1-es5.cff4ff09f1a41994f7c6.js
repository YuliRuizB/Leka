(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{LIx1:function(l,n,e){"use strict";e.d(n,"a",function(){return c}),e.d(n,"c",function(){return w}),e.d(n,"b",function(){return A}),e.d(n,"d",function(){return G});var t=e("CcnG"),u=e("iHsM"),o=e("Ip0R"),i=e("zC/G"),c=t["\u0275crt"]({encapsulation:2,styles:["\n      nz-card {\n        display: block;\n      }\n    "],data:{}});function r(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.nzTitle)})}function s(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-head-title"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,r)),t["\u0275did"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzTitle)},null)}function a(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.nzExtra)})}function d(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-extra"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,a)),t["\u0275did"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzExtra)},null)}function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](0,null,null,0))],null,null)}function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,2,0,n.component.tab.template)},null)}function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","ant-card-head"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","ant-card-head-wrapper"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,s)),t["\u0275did"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,d)),t["\u0275did"](5,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](7,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,e.nzTitle),l(n,5,0,e.nzExtra),l(n,7,0,e.tab)},null)}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](0,null,null,0))],null,null)}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-cover"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzCover)},null)}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),t["\u0275ncd"](null,0),(l()(),t["\u0275and"](0,null,null,0))],null,null)}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"nz-card-loading",[],null,null,null,x,C)),t["\u0275did"](1,49152,null,0,u.b,[t.ElementRef,t.Renderer2],null,null)],null,null)}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](0,null,null,0))],null,null)}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"li",[],[[4,"width","%"]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](3,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(l,n){l(n,3,0,n.context.$implicit)},function(l,n){l(n,0,0,100/n.component.nzActions.length)})}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"ul",[["class","ant-card-actions"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](2,278528,null,0,o.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.nzActions)},null)}function w(l){return t["\u0275vid"](2,[(l()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](1,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](4,0,null,null,6,"div",[["class","ant-card-body"]],null,null,null,null,null)),t["\u0275prd"](512,null,o.J,o.K,[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](6,278528,null,0,o.q,[o.J],{ngStyle:[0,"ngStyle"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](8,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](10,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](12,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.nzTitle||e.nzExtra||e.tab),l(n,3,0,e.nzCover),l(n,6,0,e.nzBodyStyle),l(n,8,0,!e.nzLoading),l(n,10,0,e.nzLoading),l(n,12,0,e.nzActions.length)},null)}var C=t["\u0275crt"]({encapsulation:2,styles:["\n      nz-card-loading {\n        display: block;\n      }\n    "],data:{}});function x(l){return t["\u0275vid"](2,[(l()(),t["\u0275eld"](0,0,null,null,32,"div",[["class","ant-card-loading-content"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"div",[["class","ant-col-22"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,4,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,1,"div",[["class","ant-col-8"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,1,"div",[["class","ant-col-15"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,4,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,1,"div",[["class","ant-col-6"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,"div",[["class","ant-col-18"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,4,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,1,"div",[["class","ant-col-13"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,1,"div",[["class","ant-col-9"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,6,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,1,"div",[["class","ant-col-4"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](22,0,null,null,1,"div",[["class","ant-col-3"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](24,0,null,null,1,"div",[["class","ant-col-16"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,6,"div",[["class","ant-row"],["style","margin-left: -4px; margin-right: -4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](27,0,null,null,1,"div",[["class","ant-col-8"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](28,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](29,0,null,null,1,"div",[["class","ant-col-6"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](30,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](31,0,null,null,1,"div",[["class","ant-col-8"],["style","padding-left: 4px; padding-right: 4px;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,0,"div",[["class","ant-card-loading-block"]],null,null,null,null,null))],null,null)}var A=t["\u0275crt"]({encapsulation:2,styles:["\n      nz-card-meta {\n        display: block;\n      }\n    "],data:{}});function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](0,null,null,0))],null,null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-meta-avatar"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzAvatar)},null)}function z(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.nzTitle)})}function j(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-meta-title"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,z)),t["\u0275did"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzTitle)},null)}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.nzDescription)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","ant-card-meta-description"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(l,n){l(n,2,0,n.component.nzDescription)},null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","ant-card-meta-detail"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,j)),t["\u0275did"](2,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](4,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,e.nzTitle),l(n,4,0,e.nzDescription)},null)}function G(l){return t["\u0275vid"](2,[(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](1,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.nzAvatar),l(n,3,0,e.nzTitle||e.nzDescription)},null)}},ol7E:function(l,n,e){"use strict";e.d(n,"a",function(){return f});var t=e("Wcq6"),u=e("15JJ"),o=e("67Y/"),i=e("LvDl"),c=e("dzgT"),r=e("F/XL"),s=e("CcnG"),a=e("fvl4"),d=function(){return(d=Object.assign||function(l){for(var n,e=1,t=arguments.length;e<t;e++)for(var u in n=arguments[e])Object.prototype.hasOwnProperty.call(n,u)&&(l[u]=n[u]);return l}).apply(this,arguments)},p=function(l,n){var e="function"==typeof Symbol&&l[Symbol.iterator];if(!e)return l;var t,u,o=e.call(l),i=[];try{for(;(void 0===n||n-- >0)&&!(t=o.next()).done;)i.push(t.value)}catch(c){u={error:c}}finally{try{t&&!t.done&&(e=o.return)&&e.call(o)}finally{if(u)throw u.error}}return i},f=function(){function l(l){this.afs=l}return l.prototype.getRoutes=function(l){return this.afs.collection("customers").doc(l).collection("routes").snapshotChanges()},l.prototype.setRoute=function(l,n){var e=this.afs.createId();return n.routeId=e,this.afs.collection("customers").doc(l).collection("routes").doc(e).set(n)},l.prototype.duplicateRouteWithStops=function(l){var n=this,e=d({},l),u=this.afs.createId();console.log(e);var o={customerId:e.newCustomerId,customerName:e.newCustomerName,active:!1,description:e.description,name:e.name,routeId:u};e.routeId=u;var i=this.afs.collection("customers").doc(e.newCustomerId).collection("routes").doc(u);return t.firestore().collection("customers").doc(l.customerId).collection("routes").doc(l.routeId).collection("stops").get().then(function(l){console.log(l.docs),i.set(o).then(function(){if(!l.empty){var t=n.afs.collection("customers").doc(e.newCustomerId).collection("routes").doc(u).collection("stops");l.docs.forEach(function(l){var n=l.data();t.add(n)})}})})},l.prototype.toggleActiveRoute=function(l,n,e){return this.afs.collection("customers").doc(l).collection("routes").doc(n).update({active:!e.active})},l.prototype.deleteRoute=function(l,n){return this.afs.collection("customers").doc(l).collection("routes").doc(n).delete()},l.prototype.getAllRoutes=function(){return this.afs.collectionGroup("routes",function(l){return l.where("active","==",!0)}).snapshotChanges()},l.prototype.getRoutesByCustomer=function(){var l=this;return this.joined$=this.afs.collection("customers",function(l){return l.orderBy("name")}).valueChanges({idField:"id"}).pipe(Object(u.a)(function(n){var e=i.uniq(n.map(function(l){return l.id}));return Object(c.a)(Object(r.a)(n),Object(c.a)(e.map(function(n){return l.afs.collection("customers").doc(n).collection("routes",function(l){return l.orderBy("name")}).valueChanges({idField:"id"}).pipe(Object(o.a)(function(l){return d({},l,{customerId:n})}))})))}),Object(o.a)(function(l){var n=p(l,2),e=n[0],t=n[1];return console.log(t),t.map(function(l){var n=i.filter(e,function(n){return l.customerId===n.id});return delete l.customerId,{routes:i.values(l),customerId:n[0].id,customerName:n[0].name}})})),this.joined$},l.prototype.getAuthorizedRoutes=function(l){var n=this;return console.log(l),this.joined$=this.afs.collection("vendors").doc(l).collection("routesAccess").valueChanges({idField:"id"}).pipe(Object(u.a)(function(l){var e=i.uniq(l.map(function(l){return l.routeId}));return console.log(e.length),0===e.length?Object(r.a)([]):Object(c.a)(Object(r.a)(l),Object(c.a)(e.map(function(l){return n.afs.collectionGroup("routes",function(n){return n.where("routeId","==",l)}).valueChanges().pipe(Object(o.a)(function(l){return l[0]}))})))}),Object(o.a)(function(l){var n=p(l,2),e=n[0],t=n[1];return console.log(typeof t),void 0!==t?t.map(function(l){var n=i.filter(e,function(n){return l.routeId===n.routeId});return d({},l,{permission:n[0].active||!1,permissionId:n[0].id,customerId:n[0].customerId||"",customerName:n[0].customerName||""})}):Object(r.a)([])})),this.joined$},l.prototype.getAllCustomersRoutes=function(){var l=this;return this.joined$=this.afs.collection("customers").valueChanges({idField:"id"}).pipe(Object(u.a)(function(n){return console.log(n.length),0===n.length?Object(r.a)([]):Object(c.a)(Object(r.a)(n),Object(c.a)(n.map(function(n){return l.afs.collection("customers").doc(n.id).collection("routes").valueChanges().pipe(Object(o.a)(function(l){return l.map(function(l){return d({customerId:n.id,customerName:n.name},l)})}))})))}),Object(o.a)(function(l){var n=p(l,2)[1];return console.log(n),void 0!==n?i.flatten(n):Object(r.a)([])})),this.joined$},l.prototype.setAuthorizedRoutes=function(l,n){return this.afs.collection("vendors").doc(l).collection("routesAccess").add(n)},l.prototype.getVendorRoutes=function(l){var n=this;return this.getRoutesArray(l).pipe(Object(o.a)(function(l){return l.map(function(l){return l.payload.doc.data().routeId})}),Object(u.a)(function(l){return n.afs.collectionGroup("routes",function(n){return n.where("routeId","in",l)}).valueChanges()}))},l.prototype.getRoutesArray=function(l){return this.afs.collection("vendors").doc(l).collection("routesAccess").snapshotChanges()},l.prototype.getRouteStopPoints=function(l,n){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("stops",function(l){return l.orderBy("order","asc")}).snapshotChanges()},l.prototype.getRouteVehicleAssignments=function(l,n,e,t){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("vehicleAssignments",function(l){return l.where("assignmentId","==",e).where("vendorId","==",t)}).snapshotChanges()},l.prototype.setRouteVehicleAssignments=function(l,n,e){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("vehicleAssignments").add(e)},l.prototype.updateRouteVehicleAssignment=function(l,n,e,t){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("vehicleAssignments").doc(e).update(t)},l.prototype.toggleRouteVehicleAssignment=function(l,n,e,t){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("vehicleAssignments").doc(e).update({active:!t.active})},l.prototype.deleteRouteVehicleAssignments=function(l,n,e){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("vehicleAssignments").doc(e).delete()},l.prototype.getRouteAssignments=function(l,n){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("assignments").snapshotChanges()},l.prototype.getCustomerVendorAssignments=function(l){return this.afs.collectionGroup("assignments",function(n){return n.where("customerId","==",l).orderBy("time")}).snapshotChanges()},l.prototype.deleteCustomerVendorAssignment=function(l,n){return this.afs.collection("customers").doc(n).collection("program").doc(l).delete()},l.prototype.getCustomerVendorAssignmentsByDay=function(l){var n="";switch(l.getDay()){case 0:n="isSunday";break;case 1:n="isMonday";break;case 2:n="isTuesday";break;case 3:n="isWednesday";break;case 4:n="isThursday";break;case 5:n="isFriday";break;case 6:n="isSaturday"}return this.afs.collectionGroup("assignments",function(l){return l.where(n,"==",!0).where("active","==",!0)}).snapshotChanges()},l.prototype.getVendorVehicleAssignments=function(l){return this.afs.collectionGroup("vehicleAssignments",function(n){return n.where("vendorId","==",l).where("active","==",!0)}).snapshotChanges()},l.prototype.setRouteAssignments=function(l,n,e){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("assignments").add(e)},l.prototype.updateRouteAssignment=function(l,n,e,t){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("assignments").doc(e).update(t)},l.prototype.toggleRouteAssignment=function(l,n,e,t){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("assignments").doc(e).update({active:!t.active})},l.prototype.deleteRouteAssignments=function(l,n,e){return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("assignments").doc(e).delete()},l.prototype.getRoute=function(l,n){return this.afs.collection("customers").doc(l).collection("routes").doc(n).snapshotChanges()},l.prototype.updateStopPoint=function(l,n,e){var u=e;return u.rounds={round1:e.round1,round2:e.round2,round3:e.round3},u.geopoint=new t.firestore.GeoPoint(+e.latitude,+e.longitude),console.log(u),this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("stops").doc(e.id).update(u)},l.prototype.createStopPoint=function(l,n,e){var u=e;return u.rounds={round1:e.round1,round2:e.round2,round3:e.round3,round1MinutesSinceStart:e.round1MinutesSinceStart,round2MinutesSinceStart:e.round2MinutesSinceStart,round3MinutesSinceStart:e.round3MinutesSinceStart},u.geopoint=new t.firestore.GeoPoint(+e.latitude,+e.longitude),console.log(u),this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("stops").doc(e.id).set(u)},l.prototype.toggleActiveStopPoint=function(l,n,e){var t=!e.active;return this.afs.collection("customers").doc(l).collection("routes").doc(n).collection("stops").doc(e.id).update({active:t})},l.prototype.toggleActiveVendorRouteAccess=function(l,n,e){var t=!e.permission;return this.afs.collection("vendors").doc(l).collection("routesAccess").doc(n).update({active:t})},l.prototype.deleteVendorRouteAccess=function(l,n){return this.afs.collection("vendors").doc(l).collection("routesAccess").doc(n).delete()},l.ngInjectableDef=s["\u0275\u0275defineInjectable"]({factory:function(){return new l(s["\u0275\u0275inject"](a.a))},token:l,providedIn:"root"}),l}()}}]);