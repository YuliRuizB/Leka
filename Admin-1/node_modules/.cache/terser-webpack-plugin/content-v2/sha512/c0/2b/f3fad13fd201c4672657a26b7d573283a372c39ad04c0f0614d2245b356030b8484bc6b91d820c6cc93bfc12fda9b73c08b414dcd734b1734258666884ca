{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{LIx1:function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return c}),e.d(n,\"c\",function(){return y}),e.d(n,\"b\",function(){return O}),e.d(n,\"d\",function(){return D});var t=e(\"8Y7J\"),u=e(\"YdS3\"),o=e(\"SVse\"),i=e(\"5VGP\"),c=t[\"\\u0275crt\"]({encapsulation:2,styles:[\"\\n      nz-card {\\n        display: block;\\n      }\\n    \"],data:{}});function s(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t[\"\\u0275ted\"](1,null,[\"\",\"\"]))],null,function(l,n){l(n,1,0,n.component.nzTitle)})}function d(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-head-title\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,s)),t[\"\\u0275did\"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,\"nzStringTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzTitle)},null)}function a(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t[\"\\u0275ted\"](1,null,[\"\",\"\"]))],null,function(l,n){l(n,1,0,n.component.nzExtra)})}function r(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-extra\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,a)),t[\"\\u0275did\"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,\"nzStringTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzExtra)},null)}function g(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275and\"](0,null,null,0))],null,null)}function p(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,g)),t[\"\\u0275did\"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,\"ngTemplateOutlet\"]},null),(l()(),t[\"\\u0275and\"](0,null,null,0))],function(l,n){l(n,2,0,n.component.tab.template)},null)}function f(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,7,\"div\",[[\"class\",\"ant-card-head\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](1,0,null,null,4,\"div\",[[\"class\",\"ant-card-head-wrapper\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,d)),t[\"\\u0275did\"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,r)),t[\"\\u0275did\"](5,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,p)),t[\"\\u0275did\"](7,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,3,0,e.nzTitle),l(n,5,0,e.nzExtra),l(n,7,0,e.tab)},null)}function m(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275and\"](0,null,null,0))],null,null)}function h(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-cover\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,m)),t[\"\\u0275did\"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,\"ngTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzCover)},null)}function v(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,null,null,null,null,null,null,null)),t[\"\\u0275ncd\"](null,0),(l()(),t[\"\\u0275and\"](0,null,null,0))],null,null)}function R(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,\"nz-card-loading\",[],null,null,null,x,C)),t[\"\\u0275did\"](1,49152,null,0,u.b,[t.ElementRef,t.Renderer2],null,null)],null,null)}function b(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275and\"](0,null,null,0))],null,null)}function I(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,3,\"li\",[],[[4,\"width\",\"%\"]],null,null,null,null)),(l()(),t[\"\\u0275eld\"](1,0,null,null,2,\"span\",[],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,b)),t[\"\\u0275did\"](3,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,\"ngTemplateOutlet\"]},null)],function(l,n){l(n,3,0,n.context.$implicit)},function(l,n){l(n,0,0,100/n.component.nzActions.length)})}function w(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"ul\",[[\"class\",\"ant-card-actions\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,I)),t[\"\\u0275did\"](2,278528,null,0,o.m,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null)],function(l,n){l(n,2,0,n.component.nzActions)},null)}function y(l){return t[\"\\u0275vid\"](2,[(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,f)),t[\"\\u0275did\"](1,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,h)),t[\"\\u0275did\"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275eld\"](4,0,null,null,6,\"div\",[[\"class\",\"ant-card-body\"]],null,null,null,null,null)),t[\"\\u0275prd\"](512,null,o.J,o.K,[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t[\"\\u0275did\"](6,278528,null,0,o.q,[o.J],{ngStyle:[0,\"ngStyle\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,v)),t[\"\\u0275did\"](8,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,R)),t[\"\\u0275did\"](10,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,w)),t[\"\\u0275did\"](12,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,1,0,e.nzTitle||e.nzExtra||e.tab),l(n,3,0,e.nzCover),l(n,6,0,e.nzBodyStyle),l(n,8,0,!e.nzLoading),l(n,10,0,e.nzLoading),l(n,12,0,e.nzActions.length)},null)}var C=t[\"\\u0275crt\"]({encapsulation:2,styles:[\"\\n      nz-card-loading {\\n        display: block;\\n      }\\n    \"],data:{}});function x(l){return t[\"\\u0275vid\"](2,[(l()(),t[\"\\u0275eld\"](0,0,null,null,32,\"div\",[[\"class\",\"ant-card-loading-content\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](1,0,null,null,2,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](2,0,null,null,1,\"div\",[[\"class\",\"ant-col-22\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](3,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](4,0,null,null,4,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](5,0,null,null,1,\"div\",[[\"class\",\"ant-col-8\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](6,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](7,0,null,null,1,\"div\",[[\"class\",\"ant-col-15\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](8,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](9,0,null,null,4,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](10,0,null,null,1,\"div\",[[\"class\",\"ant-col-6\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](11,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](12,0,null,null,1,\"div\",[[\"class\",\"ant-col-18\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](13,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](14,0,null,null,4,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](15,0,null,null,1,\"div\",[[\"class\",\"ant-col-13\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](16,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](17,0,null,null,1,\"div\",[[\"class\",\"ant-col-9\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](18,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](19,0,null,null,6,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](20,0,null,null,1,\"div\",[[\"class\",\"ant-col-4\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](21,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](22,0,null,null,1,\"div\",[[\"class\",\"ant-col-3\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](23,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](24,0,null,null,1,\"div\",[[\"class\",\"ant-col-16\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](25,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](26,0,null,null,6,\"div\",[[\"class\",\"ant-row\"],[\"style\",\"margin-left: -4px; margin-right: -4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](27,0,null,null,1,\"div\",[[\"class\",\"ant-col-8\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](28,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](29,0,null,null,1,\"div\",[[\"class\",\"ant-col-6\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](30,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](31,0,null,null,1,\"div\",[[\"class\",\"ant-col-8\"],[\"style\",\"padding-left: 4px; padding-right: 4px;\"]],null,null,null,null,null)),(l()(),t[\"\\u0275eld\"](32,0,null,null,0,\"div\",[[\"class\",\"ant-card-loading-block\"]],null,null,null,null,null))],null,null)}var O=t[\"\\u0275crt\"]({encapsulation:2,styles:[\"\\n      nz-card-meta {\\n        display: block;\\n      }\\n    \"],data:{}});function A(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275and\"](0,null,null,0))],null,null)}function T(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-meta-avatar\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,A)),t[\"\\u0275did\"](2,540672,null,0,o.u,[t.ViewContainerRef],{ngTemplateOutlet:[0,\"ngTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzAvatar)},null)}function z(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t[\"\\u0275ted\"](1,null,[\"\",\"\"]))],null,function(l,n){l(n,1,0,n.component.nzTitle)})}function j(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-meta-title\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,z)),t[\"\\u0275did\"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,\"nzStringTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzTitle)},null)}function V(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t[\"\\u0275ted\"](1,null,[\"\",\"\"]))],null,function(l,n){l(n,1,0,n.component.nzDescription)})}function S(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,2,\"div\",[[\"class\",\"ant-card-meta-description\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,V)),t[\"\\u0275did\"](2,540672,null,0,i.A,[t.ViewContainerRef,t.TemplateRef],{nzStringTemplateOutlet:[0,\"nzStringTemplateOutlet\"]},null)],function(l,n){l(n,2,0,n.component.nzDescription)},null)}function k(l){return t[\"\\u0275vid\"](0,[(l()(),t[\"\\u0275eld\"](0,0,null,null,4,\"div\",[[\"class\",\"ant-card-meta-detail\"]],null,null,null,null,null)),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,j)),t[\"\\u0275did\"](2,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,S)),t[\"\\u0275did\"](4,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,2,0,e.nzTitle),l(n,4,0,e.nzDescription)},null)}function D(l){return t[\"\\u0275vid\"](2,[(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,T)),t[\"\\u0275did\"](1,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null),(l()(),t[\"\\u0275and\"](16777216,null,null,1,null,k)),t[\"\\u0275did\"](3,16384,null,0,o.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,\"ngIf\"]},null)],function(l,n){var e=n.component;l(n,1,0,e.nzAvatar),l(n,3,0,e.nzTitle||e.nzDescription)},null)}},ol7E:function(l,n,e){\"use strict\";e.d(n,\"a\",function(){return r});var t=e(\"Wcq6\"),u=e(\"eIep\"),o=e(\"lJxs\"),i=e(\"LvDl\"),c=e(\"itXk\"),s=e(\"LRne\"),d=e(\"8Y7J\"),a=e(\"Xr7G\");let r=(()=>{class l{constructor(l){this.afs=l}getRoutes(l){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").snapshotChanges()}setRoute(l,n){const e=this.afs.createId();return n.routeId=e,this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(e).set(n)}duplicateRouteWithStops(l){let n=Object.assign({},l);const e=this.afs.createId();console.log(n);const u={customerId:n.newCustomerId,customerName:n.newCustomerName,active:!1,description:n.description,name:n.name,routeId:e};n.routeId=e;const o=this.afs.collection(\"customers\").doc(n.newCustomerId).collection(\"routes\").doc(e);return t.firestore().collection(\"customers\").doc(l.customerId).collection(\"routes\").doc(l.routeId).collection(\"stops\").get().then(l=>{console.log(l.docs),o.set(u).then(()=>{if(!l.empty){const t=this.afs.collection(\"customers\").doc(n.newCustomerId).collection(\"routes\").doc(e).collection(\"stops\");l.docs.forEach(l=>{const n=l.data();t.add(n)})}})})}toggleActiveRoute(l,n,e){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).update({active:!e.active})}deleteRoute(l,n){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).delete()}getAllRoutes(){return this.afs.collectionGroup(\"routes\",l=>l.where(\"active\",\"==\",!0)).snapshotChanges()}getRoutesByCustomer(){return this.joined$=this.afs.collection(\"customers\",l=>l.orderBy(\"name\")).valueChanges({idField:\"id\"}).pipe(Object(u.a)(l=>{const n=i.uniq(l.map(l=>l.id));return Object(c.a)(Object(s.a)(l),Object(c.a)(n.map(l=>this.afs.collection(\"customers\").doc(l).collection(\"routes\",l=>l.orderBy(\"name\")).valueChanges({idField:\"id\"}).pipe(Object(o.a)(n=>Object.assign({},n,{customerId:l}))))))}),Object(o.a)(([l,n])=>(console.log(n),n.map(n=>{const e=i.filter(l,l=>n.customerId===l.id);return delete n.customerId,{routes:i.values(n),customerId:e[0].id,customerName:e[0].name}})))),this.joined$}getAuthorizedRoutes(l){return console.log(l),this.joined$=this.afs.collection(\"vendors\").doc(l).collection(\"routesAccess\").valueChanges({idField:\"id\"}).pipe(Object(u.a)(l=>{const n=i.uniq(l.map(l=>l.routeId));return console.log(n.length),0===n.length?Object(s.a)([]):Object(c.a)(Object(s.a)(l),Object(c.a)(n.map(l=>this.afs.collectionGroup(\"routes\",n=>n.where(\"routeId\",\"==\",l)).valueChanges().pipe(Object(o.a)(l=>l[0])))))}),Object(o.a)(([l,n])=>(console.log(typeof n),void 0!==n?n.map(n=>{const e=i.filter(l,l=>n.routeId===l.routeId);return Object.assign({},n,{permission:e[0].active||!1,permissionId:e[0].id,customerId:e[0].customerId||\"\",customerName:e[0].customerName||\"\"})}):Object(s.a)([])))),this.joined$}getAllCustomersRoutes(){return this.joined$=this.afs.collection(\"customers\").valueChanges({idField:\"id\"}).pipe(Object(u.a)(l=>(console.log(l.length),0===l.length?Object(s.a)([]):Object(c.a)(Object(s.a)(l),Object(c.a)(l.map(l=>this.afs.collection(\"customers\").doc(l.id).collection(\"routes\").valueChanges().pipe(Object(o.a)(n=>n.map(n=>Object.assign({customerId:l.id,customerName:l.name},n))))))))),Object(o.a)(([l,n])=>(console.log(n),void 0!==n?i.flatten(n):Object(s.a)([])))),this.joined$}setAuthorizedRoutes(l,n){return this.afs.collection(\"vendors\").doc(l).collection(\"routesAccess\").add(n)}getVendorRoutes(l){return this.getRoutesArray(l).pipe(Object(o.a)(l=>l.map(l=>l.payload.doc.data().routeId)),Object(u.a)(l=>this.afs.collectionGroup(\"routes\",n=>n.where(\"routeId\",\"in\",l)).valueChanges()))}getRoutesArray(l){return this.afs.collection(\"vendors\").doc(l).collection(\"routesAccess\").snapshotChanges()}getRouteStopPoints(l,n){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"stops\",l=>l.orderBy(\"order\",\"asc\")).snapshotChanges()}getRouteVehicleAssignments(l,n,e,t){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"vehicleAssignments\",l=>l.where(\"assignmentId\",\"==\",e).where(\"vendorId\",\"==\",t)).snapshotChanges()}setRouteVehicleAssignments(l,n,e){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"vehicleAssignments\").add(e)}updateRouteVehicleAssignment(l,n,e,t){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"vehicleAssignments\").doc(e).update(t)}toggleRouteVehicleAssignment(l,n,e,t){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"vehicleAssignments\").doc(e).update({active:!t.active})}deleteRouteVehicleAssignments(l,n,e){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"vehicleAssignments\").doc(e).delete()}getRouteAssignments(l,n){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"assignments\").snapshotChanges()}getCustomerVendorAssignments(l){return this.afs.collectionGroup(\"assignments\",n=>n.where(\"customerId\",\"==\",l).orderBy(\"time\")).snapshotChanges()}deleteCustomerVendorAssignment(l,n){return this.afs.collection(\"customers\").doc(n).collection(\"program\").doc(l).delete()}getCustomerVendorAssignmentsByDay(l){let n=\"\";switch(l.getDay()){case 0:n=\"isSunday\";break;case 1:n=\"isMonday\";break;case 2:n=\"isTuesday\";break;case 3:n=\"isWednesday\";break;case 4:n=\"isThursday\";break;case 5:n=\"isFriday\";break;case 6:n=\"isSaturday\"}return this.afs.collectionGroup(\"assignments\",l=>l.where(n,\"==\",!0).where(\"active\",\"==\",!0)).snapshotChanges()}getVendorVehicleAssignments(l){return this.afs.collectionGroup(\"vehicleAssignments\",n=>n.where(\"vendorId\",\"==\",l).where(\"active\",\"==\",!0)).snapshotChanges()}setRouteAssignments(l,n,e){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"assignments\").add(e)}updateRouteAssignment(l,n,e,t){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"assignments\").doc(e).update(t)}toggleRouteAssignment(l,n,e,t){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"assignments\").doc(e).update({active:!t.active})}deleteRouteAssignments(l,n,e){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"assignments\").doc(e).delete()}getRoute(l,n){return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).snapshotChanges()}updateStopPoint(l,n,e){let u=e;return u.rounds={round1:e.round1,round2:e.round2,round3:e.round3},u.geopoint=new t.firestore.GeoPoint(+e.latitude,+e.longitude),console.log(u),this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"stops\").doc(e.id).update(u)}createStopPoint(l,n,e){let u=e;return u.rounds={round1:e.round1,round2:e.round2,round3:e.round3,round1MinutesSinceStart:e.round1MinutesSinceStart,round2MinutesSinceStart:e.round2MinutesSinceStart,round3MinutesSinceStart:e.round3MinutesSinceStart},u.geopoint=new t.firestore.GeoPoint(+e.latitude,+e.longitude),console.log(u),this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"stops\").doc(e.id).set(u)}toggleActiveStopPoint(l,n,e){const t=!e.active;return this.afs.collection(\"customers\").doc(l).collection(\"routes\").doc(n).collection(\"stops\").doc(e.id).update({active:t})}toggleActiveVendorRouteAccess(l,n,e){const t=!e.permission;return this.afs.collection(\"vendors\").doc(l).collection(\"routesAccess\").doc(n).update({active:t})}deleteVendorRouteAccess(l,n){return this.afs.collection(\"vendors\").doc(l).collection(\"routesAccess\").doc(n).delete()}}return l.ngInjectableDef=d[\"\\u0275\\u0275defineInjectable\"]({factory:function(){return new l(d[\"\\u0275\\u0275inject\"](a.a))},token:l,providedIn:\"root\"}),l})()}}]);","extractedComments":[]}